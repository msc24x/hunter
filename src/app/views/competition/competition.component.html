<app-bar></app-bar>
<app-loading *ngIf="loading"></app-loading>

<div class="body">

  <div id = "competition_info">

    <div>
      <b>{{this.competition.title}}</b>
      - {{this.competition.description}}
    </div>

    <div id="duration_info">Time Remaining : <b>{{timeRemaining.min}}</b> mins <b>{{timeRemaining.sec}}</b> sec
    </div>

  </div>

  <questions-list
    *ngIf="!hasEnded"
    [competitionInfo]="competition"
    [questionsList]="competitionQuestions"
    [editable]="false"
    (questionSelectEmitter)="selectQuestion($event)"
    [(questionSelected)]="questionSelected"
  ></questions-list>

  <div *ngIf="questionSelected != -1" id="question_title">
    Question ID : {{questionSelectedInfo.id}} for {{questionSelectedInfo.points}} pts
    <br><br>
    <b>{{questionSelectedInfo.title}}</b>
  </div>

    
  <div *ngIf="questionSelected != -1" id="question_statement">
    <ng-katex-paragraph [paragraph]="questionSelectedInfo.statement ?? ''"></ng-katex-paragraph>
  </div>

  
  <div class="row">
    
    <drop-down-list
      *ngIf="!hasEnded" 
      listType = "Language"
      [items]="['cpp', 'c', 'py', 'js']"
      (itemSelectedEvent)="languageSelected = $event; updateEditorMode()"
    ></drop-down-list>

    <div id="load_template_btn" (click)="loadTemplate()">
      Load Template
    </div>
  </div>

  <div *ngIf="!hasEnded" id="editor"></div>

  <div id="submit_controls" *ngIf="questionSelected != -1" class="row">
    <div class="button" id="submit_code_btn" (click)="postSolution()">Submit</div>
    <div class="button"  id="submit_code_samples_btn" (click)="postSolution(true)">Run Sample Cases</div>
    <div class="button" id="fetch_last_submit" (click)="fetchLastSubmission()">Fetch Last Submission</div>
    <div>{{fetchSubmissionMsg}}</div>
  </div>

  <div class="row sa">
    <div id="output_label">Submission Output</div>
    <div id="pts_desc_label">Evaluation</div>
  </div>

  <div id="output_points">

    <div id="solution_output" [innerText]="solutionOutput"></div>

    <div id="pts_desc">
      
      <div class="table_heading" >
        <div>QuesId</div>
        <div>Score</div>
        <div style="color : darkred;">Penalities</div>
      </div>
      <div *ngFor="let row of evaluation" >
        <div>{{row.question_id}}</div>
        <div>{{row.result}}</div>
        <div style="color : darkred;">{{row.penalities}}</div>
      </div>

    </div>

  </div>

  <scoreboard
    [competition_id]="c_id"
  ></scoreboard>


</div>
